<script type="text/javascript">
var OBJ_LIST = ['wlanBasic']
var ORIGINAL_OBJ_DATA = {}
var MODIFIED_OBJ_DATA = {}
</script>
<table class="table table-info beamforming_setting_zone">
<tbody>
<tr id="tr_beamforming" >
<td><script>draw_checkbox('beamforming', 'lang_beamforming_title', 'on', "beamforming_checked()");</script><span id="checkbox_div_beamforming"></span>
</td>
<td>
<span >&nbsp;</span>
</td>
</tr>
</tbody>
</table>
<div class="form-actions">
<button class="btn btn-primary multi_lang logger_bot" id="btnSave" type="button" name="" onclick="page_save()"></button>
<button class="btncancel multi_lang logger_bot" id="btnCancel" type="button" name="" onclick="page_cancel()"></button>
</div>
<script type="text/javascript">
page_tag='wifi_beamforming'
$(document).ready(function(){
$.lang_load("wifi_beamforming");
page_initial()
inject_log_bot()
escape_detection();
});

function set_beamforming_init(obj) {
$('#beamforming').attr('checked','checked');
for (var i=0; i < obj.wlanBasic.WlanBasicT.length; ++i) {
if (obj.wlanBasic.WlanBasicT[i].ETxBfEnCond == '0') {
$('#beamforming').removeAttr('checked');
break;
}
}

update_checked($('#beamforming').attr("name"));
}

function beamforming_checked(){
if ($('#beamforming').prop('checked')) {
$('#beamforming').attr('checked','checked');
}
else {
$('#beamforming').removeAttr('checked');
}
}

function escape_modified_check() {
page_save(true);
if (UI.obj.cmp(MODIFIED_OBJ_DATA,ORIGINAL_OBJ_DATA))
return false;
else
return true;
}

function set_obj_success_cb(obj) {
get_obj_data(OBJ_LIST);
show_alert(L.common.success_title, L.common.save_success);
}
function set_obj_error_cb(obj) {
if (obj.api_return == 403) {
logout('sto')
}
else {
show_alert(L.common.fail_title, L.common.save_fail)
}
}
function set_obj_data(obj_content){
if(typeof(obj_content) == 'string')
API.obj.set(JSON.parse(obj_content), set_obj_success_cb, set_obj_error_cb);
else if(typeof(obj_content) == 'object')
API.obj.set(obj_content, set_obj_success_cb, set_obj_error_cb);
}
function page_save(fake_action){
var is_beamforming=$('#beamforming').prop('checked') ? '1' : '0';

for (var i=0; i < MODIFIED_OBJ_DATA.wlanBasic.WlanBasicT.length; ++i) {
MODIFIED_OBJ_DATA.wlanBasic.WlanBasicT[i].ETxBfEnCond=is_beamforming;
}

if (fake_action == true) return;

if (JSON.stringify(MODIFIED_OBJ_DATA) == JSON.stringify(ORIGINAL_OBJ_DATA))
show_alert(L.common.lang_info_title, L.common.lang_config_not_change);
else
set_obj_data(MODIFIED_OBJ_DATA);
}
function page_cancel(){
//Coding cancel function here
MODIFIED_OBJ_DATA = API.obj.copy(ORIGINAL_OBJ_DATA);
set_beamforming_init(ORIGINAL_OBJ_DATA);
}
function get_obj_success_cb(obj) {
ORIGINAL_OBJ_DATA = API.obj.copy(obj);
MODIFIED_OBJ_DATA = API.obj.copy(ORIGINAL_OBJ_DATA);

set_beamforming_init(MODIFIED_OBJ_DATA);
}
function get_obj_error_cb(obj) {
if (obj.api_return == 403) {
logout('sto')
}
}
function get_obj_data(obj_list){
API.obj.get(obj_list, get_obj_success_cb, get_obj_error_cb);
}
function page_initial(){
//Coding initial function here
get_obj_data(OBJ_LIST)
}

</script>

