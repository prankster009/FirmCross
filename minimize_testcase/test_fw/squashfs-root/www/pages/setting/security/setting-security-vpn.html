<script type="text/javascript">
var OBJ_LIST = ['firewall']
var ORIGINAL_OBJ_DATA = {}
var MODIFIED_OBJ_DATA = {}
</script>
<div class="table-title passthrough_zone">
<span class="multi_lang" id="lang_vpn_zone_passthrough_title"></span>
</div>
<hr class="table-title-underline passthrough_zone">
<table class="table table-info passthrough_zone">
<tbody>
<tr id="tr_ipsec" >
<td><script>draw_checkbox('ipsec', 'lang_ipsec_title', 'on', "passthrough_control('ipsec')");</script><span id="checkbox_div_ipsec"></span>
</td>
<td>
<span >&nbsp;</span>
</td>
</tr>
<tr id="tr_pptp" >
<td><script>draw_checkbox('pptp', 'lang_pptp_title', 'on', "passthrough_control('pptp')");</script><span id="checkbox_div_pptp"></span>
</td>
<td>
<span >&nbsp;</span>
</td>
</tr>
<tr id="tr_l2tp" >
<td><script>draw_checkbox('l2tp', 'lang_l2tp_title', 'on', "passthrough_control('l2tp')");</script><span id="checkbox_div_l2tp"></span>
</td>
<td>
<span >&nbsp;</span>
</td>
</tr>
</tbody>
</table>
<div class="form-actions">
<button class="btn btn-primary multi_lang logger_bot" id="btnSave" type="button" name="" onclick="page_save()"></button>
<button class="btncancel multi_lang logger_bot" id="btnCancel" type="button" name="" onclick="page_cancel()"></button>
</div>
<script language="javascript" type="text/javascript">
page_tag='security_vpn'
$(document).ready(function(){
$.lang_load("security_vpn");
page_initial()
inject_log_bot()
escape_detection();
});
function callback(){

}

function passthrough_control(vpn_type_elem, enable){
enable = checkbox_switch(vpn_type_elem, enable)
}
function set_obj_success_cb(obj) {
if(obj.api_return != 0){
set_obj_error_cb(obj)
return;
}
$("#loader").hide()
show_alert(L.common.success_title, L.common.save_success)
page_initial();
//console.log(obj)
}
function set_obj_error_cb(obj) {
$("#loader").hide()
if(obj.api_return == 403){
logout('sto')
return;
}else{
show_alert(L.common.fail_title, L.common.save_fail)
}
}
function set_obj_data(obj_content){
if(typeof(obj_content) == 'string')
API.obj.set(JSON.parse(obj_content), set_obj_success_cb, set_obj_error_cb);
else if(typeof(obj_content) == 'object')
API.obj.set(obj_content, set_obj_success_cb, set_obj_error_cb);
}
function page_save(fake_action){
//Coding save function here
$("#loader").show()
MODIFIED_OBJ_DATA.firewall.FirewallP.ipsecPassthrough = $("#ipsec").prop("checked")?"1":"0";
MODIFIED_OBJ_DATA.firewall.FirewallP.pptpPassthrough = $("#pptp").prop("checked")?"1":"0";
MODIFIED_OBJ_DATA.firewall.FirewallP.l2tpPassthrough = $("#l2tp").prop("checked")?"1":"0";

if (fake_action == true){
$("#loader").hide()
return;
}

set_obj_data(MODIFIED_OBJ_DATA)
}
function page_cancel(){
page_initial();
//Coding cancel function here
}
function get_obj_success_cb(obj) {
ORIGINAL_OBJ_DATA = API.obj.copy(obj);
MODIFIED_OBJ_DATA = API.obj.copy(ORIGINAL_OBJ_DATA);
passthrough_control("ipsec",MODIFIED_OBJ_DATA.firewall.FirewallP.ipsecPassthrough);
passthrough_control("pptp",MODIFIED_OBJ_DATA.firewall.FirewallP.pptpPassthrough);
passthrough_control("l2tp",MODIFIED_OBJ_DATA.firewall.FirewallP.l2tpPassthrough);
if(MODIFIED_OBJ_DATA.firewall.FirewallP.ipsecPassthrough==1){
$('#ipsec').prop('checked',true);
}else{
$('#ipsec').prop('checked',false);
}
if(MODIFIED_OBJ_DATA.firewall.FirewallP.pptpPassthrough==1){
$('#pptp').prop('checked',true);
}else{
$('#pptp').prop('checked',false);
}
if(MODIFIED_OBJ_DATA.firewall.FirewallP.l2tpPassthrough==1){
$('#l2tp').prop('checked',true);
}else{
$('#l2tp').prop('checked',false);
}
}
function get_obj_error_cb(obj) {
//console.log(obj)
}
function get_obj_data(obj_list){
API.obj.get(obj_list, get_obj_success_cb, get_obj_error_cb);
}
function page_initial(){
//Coding initial function here
get_obj_data(OBJ_LIST)
}
function escape_modified_check() {
page_save(true);
if (UI.obj.cmp(MODIFIED_OBJ_DATA,ORIGINAL_OBJ_DATA))
return false;
else
return true;
}
</script>
