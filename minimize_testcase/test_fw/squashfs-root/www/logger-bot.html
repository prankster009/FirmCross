<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title></title>
<meta http-equiv="expires" content="0">
<meta http-equiv="cache-control" content="no-cache">
<meta http-equiv="pragma" content="no-cache">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
</head>

<body>
<div>
<H1>Logger Bot</H1>
</div>
<hr/>
<div >
<div class="">
<form>
<span>Enable</span>
<input type="radio" name="logger_enable" value="1" class="">
<span>Disable</span>
<input type="radio" name="logger_enable" value="0" class="">
<p>
<button type="button" name="" onclick="logger_save()">Save</button>
<button type="button" name="" onclick="logger_clean()">Clean History</button>
</p>
</form>
</div>
<div class="events-title">
<h2>Event History</h2>
</div>
<div class="events-content">
<ol id="event_list">
</ol>
</div>
</div>

</body>

<script language="javascript" type="text/javascript">

function logger_save(){
enable = $('input[name*=logger_enable]:checked').val()

if(enable == 1){
localStorage.logger_bot_enable="1"
}else
localStorage.logger_bot_enable="0"
}

function logger_clean(){
localStorage.logger_bot_history=""
print_history()
}

function queryString ()
{
var query_string = {};
var query = window.location.search.substring(1);
var vars = query.split("&");
for (var i = 0; i < vars.length; i++)
{
var pair = vars[i].split("=");
// If first entry with this name
if (typeof query_string[pair[0]] === "undefined")
{
query_string[pair[0]] = pair[1];
// If second entry with this name
} else if (typeof query_string[pair[0]] === "string")
{
var arr = [query_string[pair[0]], pair[1]];
query_string[pair[0]] = arr;
// If third or later entry with this name
} else
{
query_string[pair[0]].push(pair[1]);
}
}
return query_string;
}

function print_history(){
if( localStorage.logger_bot_history != "" )
var histoty = jQuery.parseJSON( localStorage.logger_bot_history );
else
var histoty = []

var list_content = ""

$.each(histoty, function( index, value ) {
list_content = list_content + "<li><span>"+JSON.stringify(value)+"</span></li>"
});

$("#event_list").html(list_content)
}

$(document).ready(function(){

var query_string=queryString();

if( 'undefined' != typeof(localStorage.logger_bot_enable) && localStorage.logger_bot_enable != "" && localStorage.logger_bot_enable == 1)
$("input[name*='logger_enable'][value='1']").attr("checked", true);
else
$("input[name*='logger_enable'][value='0']").attr("checked", true);

print_history()

});

</script>

</html>